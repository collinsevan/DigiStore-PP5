{% extends "base.html" %}

{% block content %}
<div class="content-backdrop"></div>

<div class="container mt-3">
    <!-- Checkout -->
    <div class="row">
        <div class="col">
            <h2 class="logo-font">Checkout</h2>
            <hr>

            <div class="row">
                <div class="col-12 col-lg-6">
                    <h5 class="text-muted">Order summary</h5>

                    {% for item in bag_items %}
                    <div class="d-flex justify-content-between border-bottom py-2">
                        <div class="me-2">
                            <p class="mb-0"><strong>{{ item.product.name }}</strong></p>
                            <p class="mb-0 small text-muted">Qty: {{ item.quantity }}</p>
                        </div>
                        <p class="mb-0">€{{ item.line_total|floatformat:2 }}</p>
                    </div>
                    {% empty %}
                    <p class="text-muted mb-0">Your bag is empty.</p>
                    {% endfor %}

                    <div class="d-flex justify-content-between pt-3">
                        <p class="mb-0"><strong>Total</strong></p>
                        <p class="mb-0"><strong>€{{ grand_total|floatformat:2 }}</strong></p>
                    </div>
                </div>

                <div class="col-12 col-lg-6 mt-4 mt-lg-0">
                    <form method="post" class="mt-3">
                        {% csrf_token %}

                        <fieldset class="rounded p-3 border">
                            <legend class="small px-2 w-auto mb-0">Customer details</legend>

                            <div class="mb-3">
                                {{ order_form.full_name }}
                            </div>

                            <div class="mb-3">
                                {{ order_form.email }}
                            </div>
                        </fieldset>

                        <button type="submit" class="btn btn-black rounded-0 mt-3">
                            Continue
                        </button>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}